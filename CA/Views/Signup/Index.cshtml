@model BS.Models.User

@{
    ViewData["Title"] = "Sign Up";
    Layout = "~/Views/Shared/_SharedTemplate.cshtml";
    string msg = (string)ViewData["errorMessage"]; 
}
    <div class="limiter">
        <div class="container-login100">
            <div class="wrap-login100">
                <form class="login100-form validate-form" method="post" asp-controller="Signup" asp-action="CreateUser">
                    <span class="login100-form-title p-b-26">
                        Register
                    </span>
                    <span class="login100-form-title p-b-48">
                        <i class="zmdi zmdi-font"></i>
                    </span>

                    <p id="errorMsg" style="color:green;">@msg</p>

                    <div class="wrap-input100 validate-input" data-validate="Enter your name">
                        <input class="input100" type="text" name="username">
                        <span class="focus-input100" data-placeholder="User Name"></span>
                    </div>
                    <div class="wrap-input100 validate-input" data-validate="Valid email is: a@b.c">
                        <input class="input100" type="text" name="email">
                        <span class="focus-input100" data-placeholder="Email"></span>
                    </div>

                    <div class="wrap-input100 validate-input" data-validate="Enter password">
                        <span class="btn-show-pass">
                            <i class="zmdi zmdi-eye"></i>
                        </span>
                        <input class="input100" type="password" name="pass">
                        <span class="focus-input100" data-placeholder="Password"></span>
                    </div>

                    <div class="wrap-input100 validate-input" data-validate="Confirm password">
                        <span class="btn-show-pass">
                            <i class="zmdi zmdi-eye"></i>
                        </span>
                        <input class="input100" type="password" name="cpass">
                        <span class="focus-input100" data-placeholder="Confirm Password"></span>
                    </div>

                    <div class="container-login100-form-btn">
                        <div class="wrap-login100-form-btn">
                            <div class="login100-form-bgbtn"></div>
                            <button class="login100-form-btn" type="submit">
                                Register
                            </button>
                        </div>
                    </div>

                    <div class="text-center p-t-115">
                        <span class="txt1">
                            Already have an account?
                        </span>
                        <a class="txt2" href="/Login">
                            Login
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>

<!--Captcha
 <div>       
        <img id="captchaImg" width="200" height="50" />
        <input type="text" id="captchatext" class="form-control" placeholder="captcha text" />
        <br />
        <input type="hidden" id="imageNumber" />
</div>-->
<script>
    function capcheck() {

        var capList = ["28ivw", "k4ez", "jw62K", "FH2DE", "4D7YS", "e5hb", "XDHYN", "6ne3", "HRAI", "xm9Ki"];
        var capKey = document.getElementById("imageNumber").value
        var tag = $(".form-control");
        for (i = 0; i < tag.length; i++) {
            if ($(tag[i]).val().length === 0) {
                alert("All fields are required");
                break;
            }

            var email = ($("#email").val());
            if (email.includes("@@") === false) {
                alert("Enter correct email");
                break;
            }

            if (document.getElementById("captchatext").value == capList[capKey - 1]) {
                //alert('reached inside if');
                //document.getElementById("err").value = "captcha match";
                $("#signUp").submit();
                break;
            }
            else {
                //document.getElementById("err").value = "captcha error";
                alert('Catcha error');
                break;
            }
        }
    }
</script>

<script>
    //alert('initial fn called');
    var imageN = Math.floor(Math.random() * 10 + 1);
    document.getElementById("captchaImg").src = "/Captchaimages/" + imageN + ".jpg";
    document.getElementById("imageNumber").value = imageN;
    //alert('leaving initial fn')
</script>


